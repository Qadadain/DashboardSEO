{% extends '@EasyAdmin/page/content.html.twig' %}

{% block page_title 'Bienvenue sur le Dashboard' %}
    {% block head_stylesheets %}
        {{ parent() }}
        {{ encore_entry_link_tags('app') }}
    {% endblock %}
{% block page_content %}
    <div class="row">
        <div class="col-sm-3 d-flex flex-column mr-1 card-panel teal">
            <h5>Nombre de NDD :</h5>
            <h6>{{ countNdd }}</h6>
        </div>
        <div class="col-sm-3 d-flex flex-column mr-1 card-panel teal">
            <h5>Total des ventes :</h5>
            <h6>{{ allSales }} €</h6>
        </div>
        <div class="col-sm-6">
            <canvas id="sumPerCustomer" width="400" height="400"></canvas>
        </div>
        <div class="col-sm-6">
            <canvas id="sumPerDname" width="400" height="400"></canvas>
        </div>
    </div>
{% endblock %}
    {% block body_javascript %}
        {{ parent() }}
        {{ encore_entry_script_tags('app') }}
        <script>
            let customers = document.querySelector("#sumPerCustomer")
            let customerGraph = new Chart(customers, {
                type: "pie",
                data: {
                    labels: {{ categNom|raw }},
                    datasets: [{
                        label: "Répartition des catégories",
                        data: {{ categPrice|raw }},
                        backgroundColor: {{ categColor|raw }}
                    }]
                }
            })
            let dName = document.querySelector("#sumPerDname")
            let dNameGraph = new Chart(dName, {
                type: "pie",
                data: {
                    labels: {{ dNameName|raw }},
                    datasets: [{
                        label: "Répartition des catégories",
                        data: {{ dNamePrice|raw }},
                        backgroundColor: {{ dNameColor|raw }}
                    }]
                }
            })
        </script>
    {% endblock body_javascript %}
